<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Composite Builds For Snapshot Versions - Cryptimeleon</title>
<meta name="description" content="Documentation page for the Cryptimeleon cryptography libraries.">



<meta property="og:type" content="website">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="Cryptimeleon">
<meta property="og:title" content="Composite Builds For Snapshot Versions">
<meta property="og:url" content="/contributors/composite-builds.html">


  <meta property="og:description" content="Documentation page for the Cryptimeleon cryptography libraries.">












<link rel="canonical" href="/contributors/composite-builds.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "/"
    
  }
</script>






<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#eeeeee">

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/logo.png" alt=""></a>
        
        <a class="site-title" href="/">
          Cryptimeleon
          <span class="site-subtitle">Prototyping of Cryptographic Constructions</span>
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Getting Started</span>
        

        
        <ul>
          
            <li><a href="/getting-started/first-steps.html">First Steps</a></li>
          
            <li><a href="/getting-started/5-minute-tutorial.html">5-minute Tutorial</a></li>
          
            <li><a href="/getting-started/pairing-tutorial.html">Pairing Tutorial</a></li>
          
            <li><a href="/getting-started/protocols-tutorial.html">Protocol Tutorial</a></li>
          
            <li><a href="/getting-started/implement-elgamal.html">ElGamal Tutorial</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Tools</span>
        

        
        <ul>
          
            <li><a href="https://cryptimeleon.org/subzero">Subzero ZK Compiler</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Documentation</span>
        

        
        <ul>
          
            <li><a href="/docs/how-do-I.html">How do I ...?</a></li>
          
            <li><a href="/docs/lazy-eval.html">Lazy Evaluation</a></li>
          
            <li><a href="/docs/bilinear-groups.html">Bilinear Groups</a></li>
          
            <li><a href="/docs/representations.html">Representations</a></li>
          
            <li><a href="/docs/benchmarking.html">Benchmarking</a></li>
          
            <li><a href="/docs/groupsig.html">Group Signatures</a></li>
          
            <li><a href="/docs/javadoc.html">Javadocs</a></li>
          
            <li><a href="/docs/faq.html">Frequently Asked Questions</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">For Contributors</span>
        

        
        <ul>
          
            <li><a href="/contributors/how-to-contribute.html">How to Contribute</a></li>
          
            <li><a href="/contributors/composite-builds.html" class="active">Composite Builds</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Composite Builds For Snapshot Versions">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Composite Builds For Snapshot Versions
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#overview">Overview</a><ul><li><a href="#customization">Customization</a><ul><li><a href="#examples">Examples</a><ul><li><a href="#customizing-settings-via-gradleproperties">Customizing Settings Via gradle.properties</a></li><li><a href="#customizing-settings-via-gradles--p-parameter">Customizing Settings Via Gradle’s -P Parameter</a></li></ul></li></ul></li></ul></li></ul>

            </nav>
          </aside>
        
        <p>This documents explains the composite build process for snapshot builds.
Snapshot builds are non-release builds that are still subject to change.</p>

<p>Read about composite builds <a href="https://docs.gradle.org/current/userguide/composite_builds.html">here</a>.
This document assumes you know the basics of how they work.</p>

<p>To make composite builds easier to use, we have implemented a Gradle build script to automate some steps of the process.</p>

<h1 id="overview">Overview</h1>
<p>The basic idea is to automatically download the required Cryptimeleon dependency (such as Math), and then use Gradle’s composite builds feature to include it where required.
To do this, every library that depends on some other Cryptimeleon library includes a build script in its <code class="language-plaintext highlighter-rouge">settings.gradle</code> file.
This script clones the dependency to the same directory level as the library being built and includes it as a composite build if possible.
“If possible” means that the branches should follow some rules. Let <code class="language-plaintext highlighter-rouge">LB</code> be the name of the branch of the library being built and <code class="language-plaintext highlighter-rouge">DB</code> be the name of the branch of the dependency library. The composite build will only be enabled if either of the following hold:</p>

<ul>
  <li>The dependency has no branch called <code class="language-plaintext highlighter-rouge">LB</code> and <code class="language-plaintext highlighter-rouge">DB == develop</code>. In this case, the <code class="language-plaintext highlighter-rouge">develop</code> branch of the dependency is used for the composite build.</li>
  <li>The dependency has a branch called <code class="language-plaintext highlighter-rouge">LB</code> and <code class="language-plaintext highlighter-rouge">DB = LB</code>. In this case, the <code class="language-plaintext highlighter-rouge">DB</code> branch of the dependency is used for the composite build.</li>
</ul>

<p>To summarize, the build script will always try to use the branch with the same name as <code class="language-plaintext highlighter-rouge">LB</code> and use <code class="language-plaintext highlighter-rouge">develop</code> if no such branch exists.
Importantly, no automatic checkout of branches is done. 
This means that if the branches don’t match, the build script will complain and fail. 
You can adjust this behaviour using the <strong>useCurrentBranch</strong> parameter as explained below.</p>

<p>Keep in mind that this does not include any version checking, i.e. the composite build will happily include the version of the dependency that is currently checked out, whether it matches the dependency version or not.
This means that you have to ensure that the version of the dependency being included by the composite build is the correct one.</p>

<h2 id="customization">Customization</h2>
<p>You can customize behaviour of the build script using certain properties.</p>

<p>These can either be set in the <code class="language-plaintext highlighter-rouge">gradle.properties</code> file in the top level folder of the project (on the same level as <code class="language-plaintext highlighter-rouge">build.gradle</code>), or be given as a parameter using the <code class="language-plaintext highlighter-rouge">-P</code> option for Gradle.
For examples of how this works see <a href="#examples">the examples section</a>.</p>

<ul>
  <li><strong>useCurrentBranch</strong>: If defined (any value) the branch selection checking will be skipped. 
  That means the composite build will be enabled no matter the dependency branches that are currently checked out.
  This can be useful for when you need a version that is not on <code class="language-plaintext highlighter-rouge">develop</code> but you also do not want to create a new branch.</li>
  <li><strong>checkoutIfCloned</strong>: If defined (any value), will automatically check out the corresponding
  dependency branch (branch with same name) given that the dependency was freshly cloned.
  Used by the Travis CI to automatically switch to the right dependency branch for the build.</li>
</ul>

<p>These properties only affect the project they are set for, not any of its composite build dependencies.
For example, the Predenc library depends on the Craco library which depends on the Math library.
If you enable <code class="language-plaintext highlighter-rouge">useCurrentBranch</code> only for Predenc, but not for Craco, the following will happen:
Predenc will happily include whatever Craco branch is currently checked out.
Craco, however, will then only include Math if the checked out branch names of Craco and Math match.</p>

<p>More information on Gradle properties can be found in the <a href="https://docs.gradle.org/current/userguide/build_environment.html#sec:gradle_configuration_properties">official documentation</a>.</p>

<h3 id="examples">Examples</h3>

<h4 id="customizing-settings-via-gradleproperties">Customizing Settings Via <code class="language-plaintext highlighter-rouge">gradle.properties</code></h4>
<p>The <code class="language-plaintext highlighter-rouge">gradle.properties</code> file must be in the same directory as the project’s <code class="language-plaintext highlighter-rouge">build.gradle</code> file.
Enabling <code class="language-plaintext highlighter-rouge">useCurrentBranch</code> then looks as follows:</p>
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">useCurrentBranch</span><span class="o">=</span><span class="s2">""</span>
</code></pre></div></div>
<p>We assign an empty string as any value suffices.</p>

<h4 id="customizing-settings-via-gradles--p-parameter">Customizing Settings Via Gradle’s <code class="language-plaintext highlighter-rouge">-P</code> Parameter</h4>
<p>When executing the Gradle wrapper, you can pass it properties via the <code class="language-plaintext highlighter-rouge">-P</code> parameter.
The property will then affect the project whose wrapper you executed.
The syntax is as follows:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./gradlew build <span class="nt">-PuseCurrentBranch</span>
</code></pre></div></div>
<p>After the <code class="language-plaintext highlighter-rouge">-P</code> the name of the property follows without spaces.
In this case <code class="language-plaintext highlighter-rouge">useCurrentBranch</code> does not need a value, but to set a value you would add an equals sign <code class="language-plaintext highlighter-rouge">=</code> followed by the property’s desired value.
For each property a separate <code class="language-plaintext highlighter-rouge">-P</code> must be used.</p>

        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
          <li><a href="https://twitter.com/cryptimeleon" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/cryptimeleon" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Cryptimeleon. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
